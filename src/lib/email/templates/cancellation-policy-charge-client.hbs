<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>Booking Cancelled - Cancellation Fee Applied</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
        color: #313131;
        line-height: 1.6;
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
      }
      .card-header {
        background-color: #ffffff;
        padding: 30px;
        text-align: center;
        border-radius: 8px 8px 0 0;
        border-bottom: 1px solid #ececec;
      }
      .warning-icon {
        width: 60px;
        height: 60px;
        background-color: #f59e0b;
        border-radius: 50%;
        margin: 0 auto 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: bold;
        color: white;
      }
      .card {
        background-color: #ffffff;
        margin: 0 0 20px 0;
        padding: 30px;
        border-radius: 0 0 8px 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .info-section {
        margin: 24px 0;
        padding: 20px;
        background-color: #fdf8ed;
        border-radius: 6px;
        border-left: 4px solid #dea85b;
      }
      .info-section h3 {
        margin: 0 0 16px 0;
        color: #dea85b;
        font-size: 18px;
        font-weight: bold;
      }
      .info-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 8px 0;
        padding: 8px 0;
        border-bottom: 1px solid #f3e8cd;
      }
      .info-row:last-child {
        border-bottom: none;
        margin-bottom: 0;
      }
      .info-label {
        font-weight: 600;
        color: #5d6c6f;
        flex: 1;
      }
      .info-value {
        font-weight: 500;
        color: #313131;
        text-align: right;
        flex: 1;
      }
      .policy-section {
        margin: 24px 0;
        padding: 20px;
        background-color: #fef3c7;
        border-radius: 6px;
        border-left: 4px solid #f59e0b;
      }
      .policy-section h3 {
        margin: 0 0 16px 0;
        color: #d97706;
        font-size: 18px;
        font-weight: bold;
      }
      .charge-amount {
        font-size: 24px;
        font-weight: bold;
        color: #d97706;
        text-align: center;
        margin: 16px 0;
      }
      .reason-section {
        margin: 24px 0;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 6px;
        border-left: 4px solid #6b7280;
      }
      .reason-label {
        font-weight: 600;
        color: #6b7280;
        margin-bottom: 8px;
      }
      .reason-text {
        color: #374151;
        font-style: italic;
        background-color: #ffffff;
        padding: 12px;
        border-radius: 4px;
        border-left: 3px solid #e5e7eb;
      }
      .refund-section {
        margin: 24px 0;
        padding: 20px;
        background-color: #f0f9ff;
        border-radius: 6px;
        border-left: 4px solid #3b82f6;
      }
      .refund-section h3 {
        margin: 0 0 16px 0;
        color: #3b82f6;
        font-size: 18px;
        font-weight: bold;
      }
      .footer {
        text-align: center;
        padding: 20px;
        color: #5d6c6f;
        font-size: 12px;
      }
      .support-text {
        margin: 24px 0 0 0;
        padding: 20px;
        background-color: #fafafa;
        border-radius: 6px;
        color: #5d6c6f;
        font-size: 14px;
        line-height: 1.5;
      }
    </style>
  </head>
  <body>
    <div class='container'>
      <div class='card-header'>
        <div class='warning-icon'>âš </div>
        <h1
          style='color: #f59e0b; margin: 0; font-size: 28px; font-weight: bold;'
        >
          Booking Cancelled
        </h1>
        <p style='margin: 10px 0 0 0; font-size: 16px; color: #5d6c6f;'>
          Your appointment has been cancelled and a cancellation fee applied
        </p>
      </div>

      <div class='card'>
        <div class='info-section'>
          <h3>Cancelled Appointment Details</h3>
          <div class='info-row'>
            <div class='info-label'>Professional:</div>
            <div class='info-value'>{{professionalName}}</div>
          </div>
          <div class='info-row'>
            <div class='info-label'>Date:</div>
            <div class='info-value'>{{appointmentDate}}</div>
          </div>
          <div class='info-row'>
            <div class='info-label'>Time:</div>
            <div class='info-value'>{{appointmentTime}}</div>
          </div>
          <div class='info-row'>
            <div class='info-label'>Booking ID:</div>
            <div class='info-value'>{{bookingId}}</div>
          </div>
          {{#if services}}
            <div class='info-row'>
              <div class='info-label'>Services:</div>
              <div class='info-value'>
                {{#each services}}
                  {{name}}
                  (${{price}}){{#unless @last}}, {{/unless}}
                {{/each}}
              </div>
            </div>
          {{/if}}
        </div>

        {{#if cancellationReason}}
          <div class='reason-section'>
            <div class='reason-label'>Cancellation Reason:</div>
            <div class='reason-text'>"{{cancellationReason}}"</div>
          </div>
        {{/if}}

        {{#if policyInfo}}
          <div class='policy-section'>
            <h3>Cancellation Policy Applied</h3>
            <div class='charge-amount'>${{policyInfo.chargeAmount}}</div>
            <div class='info-row'>
              <div class='info-label'>Policy Rate:</div>
              <div class='info-value'>{{policyInfo.chargePercentage}}%</div>
            </div>
            <div class='info-row'>
              <div class='info-label'>Service Amount:</div>
              <div class='info-value'>${{policyInfo.serviceAmount}}</div>
            </div>
            <div class='info-row'>
              <div class='info-label'>Time Until Appointment:</div>
              <div class='info-value'>{{policyInfo.timeDescription}}</div>
            </div>
            <p style='margin: 12px 0; color: #92400e; font-size: 14px;'>
              This cancellation fee has been charged to your payment method
              according to the professional's cancellation policy. You will see
              this charge on your payment statement within 1-2 business days.
            </p>
          </div>
        {{/if}}

        {{#if refundInfo}}
          <div class='refund-section'>
            <h3>Refund Information</h3>
            <div class='info-row'>
              <div class='info-label'>Original Amount:</div>
              <div class='info-value'>${{refundInfo.originalAmount}}</div>
            </div>
            <div class='info-row'>
              <div class='info-label'>Cancellation Fee:</div>
              <div class='info-value'>-${{policyInfo.chargeAmount}}</div>
            </div>
            <div class='info-row'>
              <div class='info-label'>Refund Amount:</div>
              <div class='info-value'>${{refundInfo.refundAmount}}</div>
            </div>
            <div class='info-row'>
              <div class='info-label'>Refund Status:</div>
              <div class='info-value'>{{refundInfo.status}}</div>
            </div>
          </div>
        {{/if}}

        <p class='support-text'>
          We understand that sometimes cancellations are unavoidable. To avoid
          cancellation fees in the future, please cancel your appointments at
          least 48 hours in advance when possible. If you have questions about
          this charge or need to book a new appointment, please contact our
          support team.
        </p>
      </div>

      <div class='footer'>
        <p>This email was sent by The Suite</p>
        <p>{{websiteUrl}}</p>
      </div>
    </div>
  </body>
</html>